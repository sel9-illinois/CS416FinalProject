<!DOCTYPE html>
<meta charset="utf-8">

<head>
  <title>Narrative Visualization for Dog Breeds</title>
</head>

<div id="step1" class="container-fluid" style="height:300px">
  <div>
    <p>
      <h1>1. Dog breed average height and average life expectancy
  This scene shows the average height of a given dog breed with respect to its expected average life expectancy for all sizes of dog breeds.
  As you can see in the plot, the life expectancy tends to decrease the larger the dog gets.
    </p>
    <p><div id="to_step2"><a href="#">View next >>></a></div></p>
  </div>
</div>

<style>

body {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.dot {
  stroke: #000;
}

.chart rect ( fill: steelblue; } 
#tooltip {
  opacity: 0;
  position: absolute; 
  text-align: center;
  width: 60px; height: 40px; 
  background: white;
  border: 0px;
}
  
</style>
<body>
<script src="//d3js.org/d3.v3.min.js"></script>
<script>
var tooltip = d3. select ("#tooltip");
  
var margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = 1000 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var x = d3.scale.linear()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var color = d3.scale.category100();

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.csv("dog_breeds.csv", function(error, data) {
  if (error) throw error;

  data.forEach(function(d) {
    d.AverageHeight = +d.AverageHeight;
    d.AverageLongevity = +d.AverageLongevity;
  });

  x.domain(d3.extent(data, function(d) { return d.AverageHeight; })).nice();
  y.domain(d3.extent(data, function(d) { return d.AverageLongevity; })).nice();

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
    .append("text")
      .attr("class", "label")
      .attr("x", width - 10)
      .attr("y", -6)
      .style("text-anchor", "middle")
      .text("Average Height (in)");

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("class", "label")
      .attr("transform", "rotate(-90)")
      .attr("y", 2)
      .attr("dy", ".35em")
      .style("text-anchor", "middle")
      .text("Average Life Expectancy (yrs)")

  svg.selectAll(".dot")
      .data(data)
    .enter().append("circle")
      .attr("class", "dot")
      .attr("r", 3.5)
      .attr("cx", function(d) { return x(d.AverageHeight); })
      .attr("cy", function(d) { return y(d.AverageLongevity); })
      .style("fill", function(d) { return color(d.Breed); })
      .on("mouseover", function(d, 1) { tooltip.style("opacity", 1)
      .style("left", (d3.event.pagex)+"px")
      .style("top", (d3.event-pagey)+"px")
      .html("Item #"+2+is "+d);
    })
    .on("mouseout", function() { tooltip.style("opacity", 0) })
});

</script>
